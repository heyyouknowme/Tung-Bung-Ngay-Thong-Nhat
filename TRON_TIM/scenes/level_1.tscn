[gd_scene load_steps=31 format=3 uid="uid://crc4brvvyu0rd"]

[ext_resource type="Texture2D" uid="uid://kyvf6p4mj3fs" path="res://TRON_TIM/assets/sprites/bg level 11111111.png" id="1_2os1m"]
[ext_resource type="Texture2D" uid="uid://bmxxa5eiguad4" path="res://TRON_TIM/assets/sprites/okkkkkkkkk.png" id="2_2os1m"]
[ext_resource type="Script" uid="uid://p7jl7bks5gqx" path="res://TRON_TIM/scripts/level 1/ui.gd" id="2_rqu1d"]
[ext_resource type="Script" uid="uid://cjwrexs5vqi4" path="res://TRON_TIM/scripts/countdown_label.gd" id="4_2os1m"]
[ext_resource type="Script" uid="uid://b7k63anibjh77" path="res://TRON_TIM/scripts/level 1/player_walk.gd" id="5_fcfvj"]
[ext_resource type="LabelSettings" uid="uid://cbiawuv7wb0ee" path="res://_SHARED ASSETS/font/red.tres" id="6_6kd5f"]
[ext_resource type="LabelSettings" uid="uid://blhg8lrnl3cjq" path="res://_SHARED ASSETS/font/black.tres" id="6_qmu2a"]
[ext_resource type="AudioStream" uid="uid://bkve5lfcxch45" path="res://TRON_TIM/assets/sounds/level 1.mp3" id="7_pa8r4"]
[ext_resource type="AudioStream" uid="uid://bmcf11s3qxjk1" path="res://TRON_TIM/assets/sounds/countdown.mp3" id="8_15mv3"]
[ext_resource type="SpriteFrames" uid="uid://c88dkas6iyipo" path="res://TRON_TIM/animations/player.tres" id="8_ojsc7"]
[ext_resource type="AudioStream" uid="uid://bhscokfl3suka" path="res://TRON_TIM/assets/sounds/reng hết giờ.mp3" id="9_e3sih"]
[ext_resource type="Script" uid="uid://b4wqmeyfkxecp" path="res://TRON_TIM/scripts/level 1/quanhuyen.gd" id="9_kh4rb"]
[ext_resource type="AudioStream" uid="uid://bhobyhawe16ud" path="res://TRON_TIM/assets/sounds/warning.mp3" id="10_2y5yt"]
[ext_resource type="SpriteFrames" uid="uid://o30wjpp5n3hd" path="res://TRON_TIM/animations/quanhuyen.tres" id="10_rix1q"]
[ext_resource type="Texture2D" uid="uid://dtyhfueqg6xho" path="res://TRON_TIM/assets/sprites/visioncone.png" id="11_ts7b8"]
[ext_resource type="Script" uid="uid://bgmfcb7s3g52m" path="res://TRON_TIM/scripts/level 1/vision_area.gd" id="12_h5gra"]
[ext_resource type="Script" uid="uid://o2wnbq4jqpxn" path="res://MAIN/script/game_control.gd" id="13_qsdy7"]
[ext_resource type="Texture2D" uid="uid://d04mex2btkvfd" path="res://MAIN/assets/ui/pause_icon.png" id="14_6kd5f"]
[ext_resource type="Texture2D" uid="uid://bt527iaapnslo" path="res://MAIN/assets/ui/pause_screen_in_game.png" id="15_a8q3s"]
[ext_resource type="Theme" uid="uid://ccjbl02crsn70" path="res://MAIN/assets/control_theme.tres" id="16_vlr7r"]
[ext_resource type="StyleBox" uid="uid://cjd00vb5wc7vg" path="res://MAIN/assets/control_hover.tres" id="17_qmu2a"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_h3yna"]
size = Vector2(11, 26)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_u1eld"]
size = Vector2(9, 25)

[sub_resource type="ConvexPolygonShape2D" id="ConvexPolygonShape2D_dnby7"]
points = PackedVector2Array(33, 43, -101, -39, -98, 87)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_qsdy7"]
size = Vector2(438.387, 20.9677)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_6kd5f"]
size = Vector2(437.419, 22.9033)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_a8q3s"]
size = Vector2(22.5806, 251.29)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_vlr7r"]
size = Vector2(20, 262.258)

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_ojsc7"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_kh4rb"]

[node name="Node" type="Node"]

[node name="level 1" type="Node2D" parent="."]
scale = Vector2(3.1, 3.1)

[node name="Camera2D" type="Camera2D" parent="level 1"]
position = Vector2(0, 191)
scale = Vector2(65.6241, 65.6241)
zoom = Vector2(1.5, 1.5)

[node name="background_level1" type="Sprite2D" parent="level 1"]
z_index = -1
position = Vector2(5.28841, 197.69)
scale = Vector2(0.592484, 0.556784)
texture = ExtResource("1_2os1m")

[node name="Obstacle" type="StaticBody2D" parent="level 1"]

[node name="Sprite2D" type="Sprite2D" parent="level 1/Obstacle"]
z_index = 1
position = Vector2(-6.44002, 201.5)
scale = Vector2(0.459914, 0.431667)
texture = ExtResource("2_2os1m")

[node name="CollisionPolygon2D9" type="CollisionPolygon2D" parent="level 1/Obstacle"]
position = Vector2(-18, 8)
scale = Vector2(0.962963, 0.971398)
polygon = PackedVector2Array(-89, 143, -90.4692, 150.007, -93, 158, -87, 163, -88.2692, 168.829, -86.1923, 179.123, -79.9615, 190.447, -73, 194, -67.5, 196.624, -59.3154, 197.361, -53.0846, 195.302, -47.8923, 192.214, -40.6231, 188.096, -42, 169)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="level 1/Obstacle"]
position = Vector2(-16, -21)
scale = Vector2(0.92444, 1.08662)
polygon = PackedVector2Array(-23.7982, 222.709, -1.23925, 231.958, 12.9808, 228.231, 14.9868, 239.32, 22.5589, 248.523, 29.0493, 251.283, 43.2694, 251.238, 51.9233, 241.115, 34.6155, 231.912, -20.553, 191.419, -20.553, 206.144, -23.7982, 212.586)

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="level 1/Obstacle"]
position = Vector2(-6, 5)
polygon = PackedVector2Array(-211, 301, -201, 297, -198, 285, -200, 273, -196, 270, -193, 261, -196, 253, -179, 261, -137, 238, -139, 205, -145, 199, -187, 196, -200, 181, -211, 150, -211, 187, -205, 197, -205, 216, -205, 225, -208, 226, -207, 233, -213, 227)

[node name="CollisionPolygon2D3" type="CollisionPolygon2D" parent="level 1/Obstacle"]
position = Vector2(23, -12)
polygon = PackedVector2Array(-140, 252, -126, 259, -112, 251, -112, 244, -125, 244, -140, 244)

[node name="CollisionPolygon2D4" type="CollisionPolygon2D" parent="level 1/Obstacle"]
position = Vector2(-7, -13)
polygon = PackedVector2Array(-126, 230, -114, 237, -101, 229, -116, 230)

[node name="CollisionPolygon2D5" type="CollisionPolygon2D" parent="level 1/Obstacle"]
position = Vector2(-27, -5)
polygon = PackedVector2Array(-21, 313, -15, 317, -5, 320, 6, 314, 15, 301, 13, 290, -27, 285, -25, 294, -26, 299, -25, 308)

[node name="CollisionPolygon2D6" type="CollisionPolygon2D" parent="level 1/Obstacle"]
position = Vector2(-26, -18)
scale = Vector2(1.05357, 1.05357)
polygon = PackedVector2Array(85.4237, 247.729, 98, 254, 114, 251, 122, 259, 165, 278, 186.034, 278.255, 208.079, 275.806, 212, 265, 206, 253, 208, 234, 208, 228, 195, 227, 149.966, 228.746, 130.983, 224.949, 127, 259, 120, 243)

[node name="CollisionPolygon2D7" type="CollisionPolygon2D" parent="level 1/Obstacle"]
position = Vector2(1, 12)
polygon = PackedVector2Array(103, 149, 113, 157, 124, 158, 135, 150, 139, 141, 137, 133, 98, 132, 100, 139)

[node name="CollisionPolygon2D10" type="CollisionPolygon2D" parent="level 1/Obstacle"]
position = Vector2(-18, -8)
polygon = PackedVector2Array(64, 227, 63, 235, 64, 236, 70, 236, 68, 233, 68, 224, 67.748, 219.715)

[node name="CollisionPolygon2D12" type="CollisionPolygon2D" parent="level 1/Obstacle"]
position = Vector2(-195, -53)
polygon = PackedVector2Array(61, 235, 66, 239, 71, 236, 68, 231)

[node name="CollisionPolygon2D8" type="CollisionPolygon2D" parent="level 1/Obstacle"]
position = Vector2(111, -73)
polygon = PackedVector2Array(64, 227, 63, 235, 64, 236, 70, 236, 67, 231, 68, 224)

[node name="UI" type="CanvasLayer" parent="level 1"]
script = ExtResource("2_rqu1d")

[node name="CountdownLabel" type="Label" parent="level 1/UI"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -90.0
offset_right = 3.0
offset_bottom = 64.14
grow_horizontal = 0
theme_override_colors/font_color = Color(0.92549, 0, 0.14902, 1)
theme_override_font_sizes/font_size = 30
label_settings = ExtResource("6_6kd5f")
horizontal_alignment = 1
vertical_alignment = 1
script = ExtResource("4_2os1m")
metadata/_edit_use_anchors_ = true

[node name="LevelTimerLabel" type="Label" parent="level 1/UI"]
offset_left = 20.0
offset_top = 20.0
offset_right = 60.0
offset_bottom = 43.0
label_settings = ExtResource("6_qmu2a")
metadata/_edit_use_anchors_ = true

[node name="LevelTimer" type="Timer" parent="level 1/UI"]
autostart = true

[node name="player" type="CharacterBody2D" parent="level 1"]
position = Vector2(-10.8065, 242)
script = ExtResource("5_fcfvj")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="level 1/player"]
sprite_frames = ExtResource("8_ojsc7")
animation = &"walk_up"

[node name="CollisionShape2D" type="CollisionShape2D" parent="level 1/player"]
position = Vector2(0.5, 3)
shape = SubResource("RectangleShape2D_h3yna")

[node name="Waypoints" type="Marker2D" parent="level 1"]

[node name="Point1" type="Marker2D" parent="level 1/Waypoints"]
position = Vector2(-103, 284)

[node name="Point2" type="Marker2D" parent="level 1/Waypoints"]
position = Vector2(-68, 228)

[node name="Point3" type="Marker2D" parent="level 1/Waypoints"]
position = Vector2(-48, 166)

[node name="Point4" type="Marker2D" parent="level 1/Waypoints"]
position = Vector2(-115, 105)

[node name="Point5" type="Marker2D" parent="level 1/Waypoints"]
position = Vector2(-100, 89)

[node name="Point6" type="Marker2D" parent="level 1/Waypoints"]
position = Vector2(53, 113)

[node name="Point7" type="Marker2D" parent="level 1/Waypoints"]
position = Vector2(94, 168)

[node name="Point8" type="Marker2D" parent="level 1/Waypoints"]
position = Vector2(53, 261)

[node name="quanhuyen" type="CharacterBody2D" parent="level 1" node_paths=PackedStringArray("patrol_points")]
position = Vector2(-112, 283)
script = ExtResource("9_kh4rb")
patrol_points = [NodePath("../Waypoints/Point1"), NodePath("../Waypoints/Point2"), NodePath("../Waypoints/Point3"), NodePath("../Waypoints/Point4"), NodePath("../Waypoints/Point5"), NodePath("../Waypoints/Point6"), NodePath("../Waypoints/Point7"), NodePath("../Waypoints/Point8")]
player_path = NodePath("../player")

[node name="CollisionShape2D" type="CollisionShape2D" parent="level 1/quanhuyen"]
position = Vector2(-0.5, 2.5)
shape = SubResource("RectangleShape2D_u1eld")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="level 1/quanhuyen"]
sprite_frames = ExtResource("10_rix1q")
animation = &"walk_up"

[node name="VisionRoot" type="Node2D" parent="level 1/quanhuyen"]
position = Vector2(1, 0)

[node name="VisionCone" type="TextureRect" parent="level 1/quanhuyen/VisionRoot"]
z_index = -1
offset_left = -150.0
offset_top = -88.0
offset_bottom = 52.0
size_flags_horizontal = 0
texture = ExtResource("11_ts7b8")
expand_mode = 5
flip_h = true

[node name="Area2D" type="Area2D" parent="level 1/quanhuyen/VisionRoot/VisionCone" node_paths=PackedStringArray("countdown_label")]
position = Vector2(96, 24)
script = ExtResource("12_h5gra")
player_path = NodePath("../../../../player")
countdown_label = NodePath("../../../../UI/CountdownLabel")

[node name="CollisionShape2D" type="CollisionShape2D" parent="level 1/quanhuyen/VisionRoot/VisionCone/Area2D"]
position = Vector2(23, 22)
shape = SubResource("ConvexPolygonShape2D_dnby7")

[node name="Background Music" type="AudioStreamPlayer2D" parent="level 1"]
stream = ExtResource("7_pa8r4")
autoplay = true

[node name="CountDownSound" type="AudioStreamPlayer2D" parent="level 1"]
stream = ExtResource("8_15mv3")

[node name="RengSound" type="AudioStreamPlayer2D" parent="level 1"]
stream = ExtResource("9_e3sih")

[node name="WarningSound" type="AudioStreamPlayer2D" parent="level 1"]
stream = ExtResource("10_2y5yt")

[node name="WorldBounds" type="StaticBody2D" parent="level 1"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="level 1/WorldBounds"]
position = Vector2(5.00003, 316.29)
shape = SubResource("RectangleShape2D_qsdy7")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="level 1/WorldBounds"]
position = Vector2(3.54839, 55.1613)
shape = SubResource("RectangleShape2D_6kd5f")

[node name="CollisionShape2D3" type="CollisionShape2D" parent="level 1/WorldBounds"]
position = Vector2(214.516, 198.548)
shape = SubResource("RectangleShape2D_a8q3s")

[node name="CollisionShape2D4" type="CollisionShape2D" parent="level 1/WorldBounds"]
position = Vector2(-203.548, 194.677)
shape = SubResource("RectangleShape2D_vlr7r")

[node name="Control" type="Control" parent="."]
top_level = true
z_index = 100
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -646.0
offset_top = 231.0
offset_right = -646.0
offset_bottom = 231.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(0.67, 0.67)
mouse_filter = 2
script = ExtResource("13_qsdy7")

[node name="TextureButton" type="TextureButton" parent="Control"]
layout_mode = 0
offset_left = 24.0
offset_top = 885.075
offset_right = 1048.0
offset_bottom = 2421.07
scale = Vector2(0.15, 0.15)
texture_normal = ExtResource("14_6kd5f")
texture_pressed = ExtResource("14_6kd5f")
texture_hover = ExtResource("14_6kd5f")
texture_focused = ExtResource("14_6kd5f")

[node name="Control" type="Control" parent="Control"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 24.0
offset_bottom = 24.0
grow_horizontal = 2
grow_vertical = 2

[node name="Panel" type="Panel" parent="Control/Control"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -24.0
grow_horizontal = 2
grow_vertical = 2

[node name="TextureRect" type="TextureRect" parent="Control/Control"]
layout_mode = 1
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -767.463
offset_top = -0.119392
offset_right = 768.537
offset_bottom = 1023.89
grow_horizontal = 2
texture = ExtResource("15_a8q3s")

[node name="VBoxContainer" type="VBoxContainer" parent="Control/Control"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -220.0
offset_top = -126.0
offset_right = 230.0
offset_bottom = 166.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("16_vlr7r")
theme_override_constants/separation = 84

[node name="ResumeButton" type="Button" parent="Control/Control/VBoxContainer"]
custom_minimum_size = Vector2(450, 100)
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
theme = ExtResource("16_vlr7r")
theme_override_colors/font_disabled_color = Color(0, 0, 0, 1)
theme_override_colors/font_hover_pressed_color = Color(0, 0, 0, 1)
theme_override_colors/font_hover_color = Color(0, 0, 0, 1)
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_colors/font_focus_color = Color(0, 0, 0, 1)
theme_override_colors/font_pressed_color = Color(0, 0, 0, 1)
theme_override_constants/outline_size = 0
theme_override_constants/h_separation = 0
theme_override_styles/hover = ExtResource("17_qmu2a")
theme_override_styles/normal = SubResource("StyleBoxEmpty_ojsc7")
text = "Resume
"

[node name="QuitButton" type="Button" parent="Control/Control/VBoxContainer"]
custom_minimum_size = Vector2(0, 100)
layout_mode = 2
theme_override_colors/font_disabled_color = Color(0, 0, 0, 1)
theme_override_colors/font_hover_pressed_color = Color(0, 0, 0, 1)
theme_override_colors/font_hover_color = Color(0, 0, 0, 1)
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_colors/font_focus_color = Color(0, 0, 0, 1)
theme_override_colors/font_pressed_color = Color(0, 0, 0, 1)
theme_override_styles/focus = ExtResource("17_qmu2a")
theme_override_styles/hover_pressed = ExtResource("17_qmu2a")
theme_override_styles/hover = ExtResource("17_qmu2a")
theme_override_styles/pressed = ExtResource("17_qmu2a")
theme_override_styles/normal = SubResource("StyleBoxEmpty_kh4rb")
text = "Exit Game"

[connection signal="body_entered" from="level 1/quanhuyen/VisionRoot/VisionCone/Area2D" to="level 1/quanhuyen" method="_on_area_2d_body_entered"]
